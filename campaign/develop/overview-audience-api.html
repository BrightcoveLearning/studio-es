---
title: 'Visión general: API de audiencia'
description: 'En este tema, aprenderá sobre la API de Audiencia. La API de audiencia le permite recuperar datos de eventos y clientes potenciales de visualización recopilados por Brightcove Campaign.'
parent: Developers
---

<article class="bcls-article">
  <h1>{{ page.title }}</h1>
  <summary>{{ page.description }}</summary>
  <section class="bcls-section">
    <h2 id="api-reference">Referencia de API</h2>
    <p>También vea el <a href="/develop/reference.html">Referencia de API</a>.</p>
  </section>
  <section class="bcls-section">
    <h2 id="Base_URL">URL base</h2>
    <p>La URL base de Audience API es:</p>
    <pre class="line-numbers">
<code class="language-http" translate="No">https://audience.api.brightcove.com/v1</code></pre>
  </section>
  <section class="bcls-section">
    <h2 id="Account_path">Ruta de la cuenta</h2>
    <p>En todos los casos, se realizarán solicitudes para una cuenta de Video Cloud específica. Siempre deberá agregar el término "cuentas" seguido de su ID de cuenta a la URL base:</p>
    <pre class="line-numbers">
<code class="language-http" translate="No">https://audience.api.brightcove.com/v1/accounts/{account_id} </code></pre>
  </section>
  <section class="bcls-section">
    <h2 id="Authentication">Autenticación</h2>
    <p>La API Audience usa Brightcove <a href="https://apis.support.brightcove.com/oauth/getting-started/overview-oauth-api-v4.html">Servicio OAuth</a> para autenticar llamadas.</p>
    <p>Primero deberá obtener las credenciales del cliente (un <code translate="No">client_id</code> y <code translate="No">client_secret</code>). Ésta es una operación única que se puede realizar utilizando el <a href="https://studio.support.brightcove.com/admin/managing-api-authentication-credentials.html">Interfaz de usuario de credenciales de OAuth</a>. Necesitará permisos para las operaciones de audiencia / lectura:</p>
    <figure class="bcls-figure"><img class="bcls-image" alt="Required Permissions" src="/assets/images/campaign/develop/operations.png" />
      <figcaption class="bcls-caption--image">Permisos requeridos</figcaption>
    </figure>
    <p>Puede obtener las credenciales del cliente directamente desde Brightcove OAuth Service utilizando <a href="https://apis.support.brightcove.com/oauth/guides/oauth-create-client-credentials-using-curl.html">rizo</a> o <a href="https://apis.support.brightcove.com/oauth/guides/oauth-create-client-credentials-using-postman.html">Cartero</a>.</p>
    <p>También necesitarás un <code translate="No">access_token</code>, que se obtiene utilizando el <code translate="No">client_id</code> y <code translate="No">client_secret</code> y se pasa un encabezado de autorización con tu solicitud de API:</p>
    <pre class="line-numbers">
<code class="language-http" translate="No">Authorization: Bearer <em>{access_token}</em></code></pre>
    <p>La <code translate="No">access_token</code> caduca después de cinco minutos, por lo que debe obtener uno para cada solicitud, o verificar para asegurarse de que su token aún sea válido. Ver <a href="https://apis.support.brightcove.com/oauth/guides/getting-access-tokens.html">Obtener tokens de acceso</a> para obtener una explicación detallada de cómo obtener tokens de acceso, incluidos ejemplos de código.</p>
  </section>
  <section class="bcls-section">
    <h2 id="Error_handling">Manejo de errores</h2>
    <p>Si ocurre un error, la API responderá con uno de los siguientes códigos de estado y un código de error correspondiente en el cuerpo de la respuesta:</p>
    <table class="bcls-table">
      <thead class="bcls-table__head">
        <tr>
          <th>Código de estado</th>
          <th>Código de error</th>
          <th>Descripción</th>
        </tr>
      </thead>
      <tbody class="bcls-table__body">
        <tr>
          <td>400</td>
          <td>BAD_REQUEST_ERROR</td>
          <td>Los parámetros de la consulta no son válidos</td>
        </tr>
        <tr>
          <td>401</td>
          <td>UNAUTHORIZED_ERROR</td>
          <td>El token de acceso está ausente, ha caducado o no es válido</td>
        </tr>
        <tr>
          <td>404</td>
          <td>RECURSO NO ENCONTRADO</td>
          <td>La URL no existe</td>
        </tr>
        <tr>
          <td>429</td>
          <td>REQUEST_THROTTLED_ERROR</td>
          <td>El usuario superó la política de limitación de velocidad.</td>
        </tr>
        <tr>
          <td>500</td>
          <td>ERROR INTERNO</td>
          <td>Se ha producido un error interno</td>
        </tr>
        <tr>
          <td>504</td>
          <td>GATEWAY_TIMEOUT_ERROR</td>
          <td>El servidor agotó el tiempo de espera mientras cumplía con su solicitud</td>
        </tr>
      </tbody>
    </table>
    <p>A continuación se muestra un cuerpo de respuesta de muestra para un error:</p>
    <pre class="line-numbers">
<code class="language-json" translate="No">[
   {
    "error_code": "UNAUTHORIZED_ERROR",
    "message": "Permission denied"
   }
]</code></pre>
  </section>
  <section class="bcls-section">
    <h2 id="Parameters">Parámetros</h2>
    <p>Hay varios parámetros que puede agregar a las solicitudes para limitar y filtrar los datos recuperados. Estos se aplican a todos los tipos de solicitud descritos en las secciones siguientes.</p>
    <h3 id="Filtering_results">Filtrar resultados</h3>
    <p>Puede filtrar los resultados utilizando el <code translate="No">where</code> parámetro. La sintaxis de los filtros es:</p>
    <pre class="line-numbers">
<code class="language-http" translate="No">where=field1==value1;field2==value2</code></pre>
    <p>Por ejemplo:</p>
    <pre class="line-numbers">
<code class="language-http" translate="No">where=video_id==123456789;video_name==test</code></pre>
    <p>Las comas se tratan como OR lógicos y los puntos y comas como AND lógicos. Por ejemplo, <code translate="No">where=video_id==1234,5678;video_name=test</code> se interpreta como "donde video_id = 1234 OR 5678, AND video_name = test".</p>
    <h3>Seleccionar campos para regresar</h3>
    <p>Se puede especificar una lista de campos en la solicitud para limitar los resultados a ese subconjunto de campos. La sintaxis de los campos es:</p>
    <pre class="line-numbers">
<code class="language-http" translate="No">fields=field1,field4</code></pre>
    <p>Por ejemplo:</p>
    <pre class="line-numbers">
<code class="language-http" translate="No">fields=video_id,video_name</code></pre>
    <p>Los campos que puede filtrar y ordenar se detallan para cada tipo de solicitud en las secciones siguientes.</p>
    <h3 id="Date_ranges">Intervalos de fechas</h3>
    <p>Los rangos de fechas se pueden especificar en <code translate="No">from</code> y <code translate="No">to</code> y se aplican a la fecha en que se actualizó por última vez el evento de vista (el campo updated_at). Los rangos de fechas se pueden indicar en los siguientes formatos:</p>
    <ul>
      <li>El valor del texto <code translate="No">now</code> que representa la hora actual</li>
      <li>Valores de tiempo de época en milisegundos, como <code translate="No">1377047323000</code></li>
      <li>Fechas expresadas en formato de fecha internacional estándar ISO 8601: <code translate="No">YYYY-MM-DD</code> formato, como <code translate="No">2013-09-12</code>. Para fechas expresadas en este formato:
        <ul>
          <li>Cualquier rango de fechas especificado se interpretará en UTC</li>
          <li>La hora de la fecha indicada se interpretará como medianoche ( <code translate="No">00:00:00</code>) en la fecha especificada</li>
        </ul>
      </li>
      <li>Fechas relativas: puede expresar cualquiera de las <code translate="No">to</code> y <code translate="No">from</code> valores relativos al otro en <code translate="No">d</code> (dias), <code translate="No">h</code> (horas), <code translate="No">m</code> (minutos), o <code translate="No">s</code> (segundo). Por ejemplo:
        <ul>
          <li><code class="language-http" translate="No">from=2015-01-01&amp;to=31d</code></li>
          <li><code class="language-http" translate="No">from=-48h&amp;to=now</code></li>
          <li><code class="language-http" translate="No">from=-2d&amp;to=now</code>(dará los mismos resultados que el ejemplo anterior)</li>
          <li><code class="language-http" translate="No">from=-365d&amp;to=2015-12-31</code></li>
          <li><code class="language-http" translate="No">from=-10m&amp;to=now</code></li>
        </ul>
      </li>
    </ul>
    <h3 id="Paging_results">Resultados de paginación</h3>
    <p>La <code translate="No">limit</code> es el número de artículos a devolver (predeterminado: 25; máximo: 100). <code translate="No">offset</code> es el número de elementos que se deben omitir (predeterminado: 0). Puedes usar <code translate="No">limit</code> y <code translate="No">offset</code> juntos para crear una aplicación que recorra los resultados. Cada uno incluye el <code translate="No">limit</code> <code translate="No">offset</code>, y <code translate="No">count.</code>, que puede usar para configurar iteración superior sobre los resultados totales. Por ejemplo, en JavaScript, podría obtener las iteraciones totales requeridas de esta manera:</p>
    <pre class="line-numbers">
<code class="language-javascript" translate="No">// response is the JSON-parsed response from the first request
var totalRequests = Math.ceil(response.count / response.limit)</code></pre>
  </section>
  <section class="bcls-section">
    <h2 id="Retrieving_view_events">Recuperando eventos de vista</h2>
    <p>Para recuperar eventos de visualización en una cuenta, realice una <code translate="No">GET</code> solicitud al recurso view_events:</p>
    <pre class="line-numbers">
<code class="language-http" translate="No">https://audience.api.brightcove.com/v1/accounts/{account_id}/view_events</code></pre>
    <aside class="bcls-aside bcls-aside--warning">Ver solo eventos que han sido <em>procesado</em> aparecerá en la respuesta.</aside>
    <p>Aquí hay una solicitud de muestra en cURL</p>
    <pre class="line-numbers">
<code class="language-bash" translate="No">curl -i https://audience.api.brightcove.com/v1/accounts/{account_id}/view_events?where=video_id==123&amp;from=-5d&amp;to=now&amp;sort=-created_at \
  -H "Authorization: Bearer {token}"</code></pre>
    <p>La respuesta se verá así:</p>
    <pre class="line-numbers">
<code class="language-json" translate="No">{
    "count": 27,
    "limit": 25,
    "offset": 0,
    "result": [
        {
            "created_at": "2016-04-25T18:30:21.651Z",
            "page_url": "http://players.brightcove.net/1486906377/V1s6NOwRx_default/index.html?videoId=4842718056001",
            "player_id": "V1s6NOwRx",
            "time_watched": 2,
            "updated_at": "2016-04-25T18:30:21.651Z",
            "video_id": "4842718056001",
            "video_name": "Horses Heading to the Track",
            "watched": 19
        },
        {
            "created_at": "2016-04-25T18:31:55.071Z",
            "page_url": "http://players.brightcove.net/1486906377/BkgFuzyhg_default/index.html?videoId=4842718056001",
            "player_id": "BkgFuzyhg",
            "time_watched": 15,
            "updated_at": "2016-04-25T18:32:00.879Z",
            "video_id": "4842718056001",
            "video_name": "Horses Heading to the Track",
            "watched": 99
        }, ...
    }
]</code></pre>
    <h3 id="fieldsForViewEvents">Campos de filtrado y selección</h3>
    <p>Todos <a href="#Parameters">parámetros</a> se puede utilizar con <code translate="No">view_event</code> peticiones.</p>
    <p>Aquí hay una solicitud de muestra en cURL usando los parámetros:</p>
    <pre class="line-numbers">
<code class="language-bash" translate="No">curl -i https://audience.api.brightcove.com/v1/accounts/{account_id}/view_events?where=video_id==123&amp;from=-5d&amp;to=now&amp;sort=-created_at \
  -H "Authorization: Bearer {token}"</code></pre>
    <p>Los siguientes campos son compatibles con <code translate="No">view_event</code> solicitudes al filtrar con un <code translate="No">where</code> cláusula o al seleccionar durante una <code translate="No">fields</code> cláusula:</p>
    <table class="bcls-table">
      <thead class="bcls-table__head">
        <tr>
          <th>Campo</th>
          <th>Descripción</th>
        </tr>
      </thead>
      <tbody class="bcls-table__body">
        <tr>
          <td>video_id</td>
          <td>Identificación de video de Brightcove</td>
        </tr>
        <tr>
          <td>video_name</td>
          <td>Nombre del video de Brightcove</td>
        </tr>
        <tr>
          <td>tracking_id</td>
          <td>ID de seguimiento personalizado</td>
        </tr>
        <tr>
          <td>external_id</td>
          <td>Marketo, Eloqua o GUID personalizado</td>
        </tr>
        <tr>
          <td>player_id</td>
          <td>El ID del reproductor de Brightcove que creó el evento de vista</td>
        </tr>
        <tr>
          <td>page_url</td>
          <td>La URL de la página donde se creó el evento de visualización.</td>
        </tr>
        <tr>
          <td>observado</td>
          <td>Porcentaje visto</td>
        </tr>
        <tr>
          <td>time_watched</td>
          <td>Segundos del video visto</td>
        </tr>
        <tr>
          <td>created_at</td>
          <td>Fecha de creación</td>
        </tr>
        <tr>
          <td>updated_at</td>
          <td>Fecha de última actualización</td>
        </tr>
        <tr>
          <td>is_synced</td>
          <td>Un booleano que indica si el evento de vista se ha sincronizado o no.</td>
        </tr>
        <tr>
          <td>evento 1</td>
          <td rowspan="3">Eventos personalizados</td>
        </tr>
        <tr>
          <td>event_2</td>
        </tr>
        <tr>
          <td>event_3</td>
        </tr>
        <tr>
          <td>metric_1</td>
          <td rowspan="3">Métricas personalizadas</td>
        </tr>
        <tr>
          <td>metric_2</td>
        </tr>
        <tr>
          <td>metric_3</td>
        </tr>
      </tbody>
    </table>
  </section>
  <section class="bcls-section">
    <h2 id="Retrieving_Leads">Recuperar clientes potenciales</h2>
    <p>Para recuperar eventos de visualización en una cuenta, realice una <code translate="No">GET</code> solicitud a la <code translate="No">view_events</code> recurso:</p>
    <pre class="line-numbers">
<code class="language-http" translate="No">https://audience.api.brightcove.com/v1/accounts/{account_id}/leads</code></pre>
    <p>Respuesta de muestra:</p>
    <pre class="line-numbers">
<code class="language-json" translate="No">{
    "count": 2,
    "limit": 25,
    "offset": 0,
    "result": [
        {
            "created_at": "2016-06-30T12:57:11.283Z",
            "email_address": "bbailey@brightcove.com",
            "first_name": "Bob",
            "last_name": "Bailey",
            "page_url": "http://players.brightcove.net/1486906377/Hk4TBqzL_default/index.html?videoId=4997275041001",
            "player_id": "Hk4TBqzL",
            "video_id": "4997275041001"
        },
        {
            "created_at": "2016-06-30T12:57:33.301Z",
            "email_address": "rcrooks@brightcove.com",
            "first_name": "Robert",
            "last_name": "Crooks",
            "page_url": "http://players.brightcove.net/1486906377/Hk4TBqzL_default/index.html?videoId=4997275041001",
            "player_id": "Hk4TBqzL",
            "video_id": "4997275041001"
        }
    ]
}</code></pre>
    <h3 id="fieldsForLeads">Campos de filtrado y selección</h3>
    <p>Todos <a href="#Parameters">parámetros</a> se puede utilizar con <code translate="No">leads</code> peticiones.</p>
    <p>Aquí hay una solicitud de muestra en cURL usando los parámetros:</p>
    <pre class="line-numbers">
<code class="language-bash" translate="No">curl -i https://audience.api.brightcove.com/v1/accounts/{account_id}/leads?where=video_id==123&amp;from=-5d&amp;to=now&amp;sort=-created_at \
  -H "Authorization: Bearer {token}"</code></pre>
    <p>Los siguientes campos son compatibles con <code translate="No">leads</code> solicitudes al filtrar con un <code translate="No">where</code> cláusula o al seleccionar durante una <code translate="No">fields</code> cláusula:</p>
    <table class="bcls-table">
      <thead class="bcls-table__head">
        <tr>
          <th>Campo</th>
          <th>Descripción</th>
        </tr>
      </thead>
      <tbody class="bcls-table__body">
        <tr>
          <td>video_id</td>
          <td>Identificación de video de Brightcove</td>
        </tr>
        <tr>
          <td>external_id</td>
          <td>Marketo, Eloqua o GUID personalizado</td>
        </tr>
        <tr>
          <td>player_id</td>
          <td>El ID del reproductor de Brightcove que creó el evento de vista</td>
        </tr>
        <tr>
          <td>page_url</td>
          <td>La URL de la página donde se creó el evento de visualización.</td>
        </tr>
        <tr>
          <td>created_at</td>
          <td>Fecha de creación</td>
        </tr>
        <tr>
          <td>dirección de correo electrónico</td>
          <td>La dirección de correo electrónico del cliente potencial</td>
        </tr>
        <tr>
          <td>primer nombre</td>
          <td>El primer nombre del cliente potencial, si se proporciona</td>
        </tr>
        <tr>
          <td>apellido</td>
          <td>El apellido del cliente potencial, si se proporciona</td>
        </tr>
        <tr>
          <td>teléfono de negocios</td>
          <td>El número de teléfono del cliente potencial, si se proporciona</td>
        </tr>
        <tr>
          <td>país</td>
          <td>El país del cliente potencial si se proporciona</td>
        </tr>
        <tr>
          <td>nombre de empresa</td>
          <td>La empresa del cliente potencial si se proporciona</td>
        </tr>
        <tr>
          <td>industria</td>
          <td>La industria a la que pertenece el cliente potencial, si se proporciona</td>
        </tr>
      </tbody>
    </table>
  </section>
</article>